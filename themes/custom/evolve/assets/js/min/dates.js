const months=["January","February","March","April","May","June","July","August","September","October","November","December"];let currentViewDate=new Date;function loadMonthsCarousel(){let t=$("#month-carousel");t.html(""),months.forEach((e,a)=>{let n=$('<div class="month-wrapper text-center"></div>');n.attr("data-month-index",a),n.text(e),t.append(n)}),$(".monthslider2").owlCarousel({loop:!1,margin:10,nav:!0,items:1,dots:!1,startPosition:new Date().getMonth()}),$(".month-wrapper").on("click",function(){let t=parseInt($(this).data("month-index"));currentViewDate=new Date(currentViewDate.getFullYear(),t,1),loadDatesCarousel()})}function loadDatesCarousel(){$(".dateslider").each(function(){let t=$(this),e=t.data("target_id");t.trigger("destroy.owl.carousel"),t.html("");let a=new Date,n=new Date(Math.max(a,currentViewDate));for(let o=0;o<7;o++){let i=new Date(n);i.setDate(n.getDate()+o);let s=$('<div class="item date-wrapper current_date_select text-center"></div>'),l=$('<div class="day text-center"></div>').html(`
    <span class="day-month">${i.toLocaleString("en-us",{weekday:"short"}).toUpperCase()} / ${i.toLocaleString("en-us",{month:"short"}).toUpperCase()}</span><br>
    <span class="date-number">${i.getDate()}</span>
`),r=$('<div class="date text-center"></div>').append(l);s.attr("data-date",i.getDate()),s.attr("data-month",i.getMonth()+1),s.attr("data-year",i.getFullYear()),s.attr("data-target_id",e),i.toDateString()===a.toDateString()&&s.addClass("highlight-today"),s.append(l),s.append(r),t.append(s)}let d={loop:!1,margin:10,nav:!0,navText:['<i class="fas fa-chevron-left owl-left"></i>','<i class="owl-right fas fa-chevron-right"></i>'],items:7,dots:!1,responsive:{0:{items:1},600:{items:7}},onInitialized:addCustomNavigation,onTranslated:function(t){if(600>$(window).width()){let e=$(t.target).find(".owl-item.active .current_date_select");e.click(),updateCurrentViewDate(e)}}};t.owlCarousel(d)}),updateMonthCarousel(),$(".current_date_select").off("click").on("click",function(){$(".current_date_select").removeClass("activedates date-highlight"),$(this).addClass("activedates date-highlight"),hidePassedSlots()}),600>$(window).width()&&$(".dateslider").each(function(){$(this).find(".owl-item:first .current_date_select").click()})}function addCustomNavigation(t){$(".dateslider .owl-nav").show(),$(".dateslider .owl-next").off("click").on("click",function(){return updateDates(1),!1}),$(".dateslider .owl-prev").off("click").on("click",function(){return updateDates(-1),!1})}function updateMonthCarousel(){$(".monthslider2").trigger("to.owl.carousel",[currentViewDate.getMonth(),300])}function hidePassedSlots(){let t=new Date,e=$(".current_date_select.activedates"),a=e.data("date"),n=e.data("month"),o=e.data("year"),i=new Date(o,n,a),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=new Date(i.getFullYear(),i.getMonth(),i.getDate());if(l.getTime()===s.getTime()){let r=t.getHours();r>=12&&$(".morning-slot").addClass("slot-section-hidden"),r>=16&&$(".afternoon-slot").addClass("slot-section-hidden"),$(".ap-book").each(function(){let e=$(this).data("time-slot"),[i,s]=e.split(" "),[l,r]=i.split(":");l=parseInt(l),r=parseInt(r),"pm"===s.toLowerCase()&&12!==l?l+=12:"am"===s.toLowerCase()&&12===l&&(l=0);let d=new Date(o,n,a,l,r);d<=t?$(this).hide():$(this).show()})}else $(".ap-book").show(),$(".morning-slot, .afternoon-slot, .evening-slot").removeClass("slot-section-hidden");updateSlotSection("morning-slot",0,11),updateSlotSection("afternoon-slot",12,15),updateSlotSection("evening-slot",16,23)}function updateSlotSection(t,e,a){let n=$(`.${t}`),o=n.find(".ap-book:visible").filter(function(){let t=$(this).data("time-slot"),[n,o]=t.split(" "),[i,]=n.split(":");return i=parseInt(i),"pm"===o.toLowerCase()&&12!==i&&(i+=12),"am"===o.toLowerCase()&&12===i&&(i=0),i>=e&&i<=a}),i=o.length;if(0===i)n.addClass("slot-section-hidden");else{n.removeClass("slot-section-hidden");let s=n.find(".fs-3 b"),l=s.text().split("(")[0].trim();s.text(`${l} (${i} slots)`)}}function updateCurrentViewDate(t){let e=parseInt(t.attr("data-date")),a=parseInt(t.attr("data-month"))-1,n=parseInt(t.attr("data-year"));currentViewDate=new Date(n,a,e)}function addCustomNavigation(t){$(".dateslider .owl-nav").show(),$(".dateslider .owl-next").off("click").on("click",function(){return 600>$(window).width()?handleSmallDeviceNavigation(1):updateDates(1),!1}),$(".dateslider .owl-prev").off("click").on("click",function(){return 600>$(window).width()?handleSmallDeviceNavigation(-1):updateDates(-1),!1})}function handleSmallDeviceNavigation(t){updateDates(t),setTimeout(function(){let t=$(".dateslider").find(".owl-item.active .current_date_select");t.addClass("activedates date-highlight"),t.click()},350)}function updateDates(t){let e=new Date;currentViewDate.setDate(currentViewDate.getDate()+t),currentViewDate<e&&(currentViewDate=new Date(e)),loadDatesCarousel()}$(document).ready(function(){loadMonthsCarousel(),loadDatesCarousel(),hidePassedSlots()});